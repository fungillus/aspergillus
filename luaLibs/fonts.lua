require("basic2")

function convertCharacterToGlyph(char)

	return string.byte(char) - 32
end

Fonts = {glypthHeight = nil, fontsImg = nil, fontsBitmap = nil}

function Fonts:new(o)
	local o = o or {}
	o.glyphHeight=8

	o.fontsImg = {width=6, height=760, data={0,0,0,0,0,0,0,13104,0,0,12288,0,0,4352,4352,0,0,0,8995,771,4883,8192,0,4096,530,8995,257,512,8992,8448,4098,528,4096,4096,0,4096,12561,12288,12834,12288,12288,12288,0,8704,0,0,0,0,546,4096,0,0,4096,0,8192,273,0,8192,0,0,4658,562,4112,4096,0,4096,48,4401,16,0,4096,0,0,0,0,32,13072,0,48,48,16,0,0,0,0,0,0,0,13056,0,0,33,8448,4096,0,0,8467,12816,273,8192,12288,0,512,4369,0,8192,12288,0,8448,12321,256,12288,12288,4096,8449,12320,4658,8192,12288,4096,4400,8754,48,0,8192,0,12592,12336,12289,12288,12288,0,33,8496,1,8192,12288,0,12288,12321,12544,8192,0,0,8481,12336,4626,8192,12288,4096,8480,12337,256,8192,0,0,0,13056,0,0,13056,0,0,13056,0,32,13072,0,32,8449,0,0,8192,0,512,768,256,8192,12288,4096,8192,289,0,8192,0,0,8448,12290,272,0,4112,0,529,770,291,4384,4656,8976,561,12336,306,4096,0,8192,12593,12336,257,12288,12288,0,8465,12288,257,8192,12288,0,12561,4610,16,12288,4096,0,12593,12336,4096,12288,12288,4096,12593,12336,4096,4096,0,0,8465,12320,4146,8192,12288,4096,4401,48,8754,4096,0,8192,12288,12561,4096,12288,12288,4096,8193,12834,4096,8192,4096,0,4401,530,4096,4096,0,4096,4369,0,0,12288,12288,4096,4881,48,8994,4096,0,8192,4881,18,8738,4096,0,12288,8465,12288,4642,8192,12288,4096,8497,12336,256,4096,0,0,8465,12320,4643,8192,12288,8192,8497,12338,256,4096,0,4096,8480,12336,12306,12288,12288,4096,12288,12561,4096,0,4096,0,4369,0,8738,8192,12288,4096,4386,0,8721,0,12288,0,4369,3,8738,12288,0,12288,4610,530,4096,4096,0,4096,4608,49,8448,8192,0,0,12290,12816,4096,12288,12288,4096,8738,12288,0,8192,12288,0,4608,18,0,0,0,4096,8192,12834,0,8192,12288,0,512,4608,0,0,0,0,0,0,0,8192,12288,4096,12561,12288,12834,12288,12288,12288,33,12336,273,8192,12288,4096,4401,18,0,12288,4096,0,546,768,0,8192,12288,0,33,8754,0,8192,12288,0,546,4624,0,0,12288,0,531,256,0,4352,0,0,33,18,0,8224,12816,0,4401,1,0,4096,4096,0,0,4097,0,0,4096,0,0,256,0,48,4352,0,275,16,0,4096,4096,0,0,4369,0,8192,12288,0,529,528,17,4096,0,4096,785,768,17,4096,0,4096,34,768,17,0,12288,0,33,18,0,12561,4096,0,2,48,1,0,12288,4369,34,768,256,8192,0,0,530,771,0,512,768,4096,768,4881,256,0,4096,0,546,0,273,0,12288,4096,544,1,545,0,8192,0,12561,12288,12834,12288,12288,12288,12561,12288,12834,12288,12288,12288,18,2,16,528,4096,0,770,784,0,12288,12288,0,12561,12288,12834,12288,12288,12288,12561,12288,12834,12288,12288,12288,12561,12288,12834,12288,12288,12288,12561,12288,12834,12288,12288,12288}}

	o.fontsBitmap = Bitmap:new(o.fontsImg.width, o.fontsImg.height)
	o.fontsBitmap.data = o.fontsImg.data

	setmetatable(o, self)
	self.__index = self
	return o
end

function Fonts:printText(destinationBitmap, destinationCoordinate, str)
	local x = destinationCoordinate.x
	local y = destinationCoordinate.y

	for c in str:gmatch(".") do
		destinationBitmap:blitSection(self.fontsBitmap, {x=x, y=y}, {x=0, y=self.glyphHeight*convertCharacterToGlyph(c), width=self.fontsImg.width, height=self.glyphHeight})
		x = x + self.fontsImg.width
	end
end
